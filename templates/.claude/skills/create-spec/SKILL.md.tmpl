---
name: create-spec
description: |
  Create a feature specification through guided conversation.
  USE WHEN: Starting new features, formalizing discussions into specs, converting GitHub issues.
  DO NOT USE: For quick fixes, doc-only changes, or when spec already exists (use /review-spec).
argument-hint: "[feature-name] or --from-issue <url>"
disable-model-invocation: true
allowed-tools: Read, Grep, Glob, Bash, Task, AskUserQuestion, Write, TodoWrite, WebFetch
---

# Create Spec: Interactive Specification Builder

Create a feature specification for `$ARGUMENTS` through guided conversation.

**References:**
- [SOLID principles & spec structure](_shared/spec-standards.md)
- [File structure conventions](_shared/file-structure.md)
- [Background execution rules](_shared/background-execution.md)

## Modes

### Guided Mode (default)
```
/create-spec [optional-feature-name]
```
See [modes/guided.md](modes/guided.md) for detailed workflow.

### From-Issue Mode
```
/create-spec --from-issue <github-issue-url>
```
See [modes/from-issue.md](modes/from-issue.md) for detailed workflow.

---

## Your Role

You are a **spec shaper** - help users articulate what they want to build, ask clarifying questions until you have SOLID understanding, then generate a complete specification.

---

## Workflow Overview

### Phase 1: Assess Context & Mode
- **From-Issue**: Fetch and parse GitHub issue with WebFetch
- **Guided**: Check for prior context or ask about the goal

### Phase 2: Scout the Codebase
```
Task(scout, run_in_background: true):
  Feature goal: [user's description]
  Find: patterns, files to modify, test patterns, conflicts
```
WAIT for completion. Share findings with user.

### Phase 3: Clarifying Questions
Ask 2-4 questions at a time until SOLID understanding. Focus on:
- Requirements, constraints, edge cases
- Success criteria, scope boundaries

### Phase 4: Confirm Understanding
Summarize back to user: Goal, Requirements, Constraints, Success Criteria, Out of Scope.
Wait for confirmation.

### Phase 5: Generate Spec
```
Task(spec-architect, run_in_background: true):
  Mode: [Guided | From-Issue]
  Goal: [user's goal or parsed issue]
  Scout Context: [findings]
  Clarification Answers: [Q&A summary]
```
WAIT for completion.

### Phase 6: Validate
```
Task(spec-reviewer):
  Review specs/[dated-folder]/SPEC.md
```
Report validation results.

### Phase 7: Complete
```markdown
Spec created: specs/[dated-folder]/SPEC.md
Validation: [PASSED/issues found]

Ready: /orchestrate [dated-folder]
```

---

## Critical Rules

1. **Keep asking** until SOLID understanding - don't rush
2. **Scout first** to ground conversation in actual codebase patterns
3. **Confirm before generating** - summarize and get explicit approval
4. **Use dated folders** - always `YYYY-MM-DD-feature-name/`
5. **Capture decisions** - every clarification is worth recording
6. **Validate automatically** - run spec-reviewer before marking complete
