# spec-reviewer Regression Tests
# These tests should ALWAYS pass (~100% expected)
# Derived from capability tests that have proven stable
#
# Add tests here after they consistently pass in capability evals

name: spec-reviewer-regression
description: Ensure spec-reviewer doesn't regress on known-good behaviors
agent: spec-reviewer
model: haiku

tasks:
  # Core functionality that must never break
  - id: regression-approves-complete-spec
    type: positive
    description: "Must approve well-formed specs (core functionality)"
    input:
      spec: fixtures/specs/complete/add-button.md
    graders:
      - type: code
        check: status == "APPROVED"

  - id: regression-rejects-vague-spec
    type: positive
    description: "Must reject obviously vague specs (core functionality)"
    input:
      spec: fixtures/specs/incomplete/vague-feature.md
    graders:
      - type: code
        check: status == "NEEDS_WORK"

  - id: regression-provides-feedback
    type: positive
    description: "Must provide feedback when rejecting (core functionality)"
    input:
      spec: fixtures/specs/incomplete/vague-feature.md
    graders:
      - type: code
        check: feedback.length > 0 || missing_sections.length > 0

# Metadata
metadata:
  version: "1.0.0"
  created: "2026-02-03"
  expected_pass_rate: 1.0
  alert_on_any_failure: true
